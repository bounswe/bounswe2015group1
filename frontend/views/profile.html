<div ng-controller="ProfileCtrl">
	
  <div class="col-md-3" >
    <img src="img/usermale.png" class="img-thumbnail" >
    <h3>{{userName}}</h3>
  </div>
  <form name="ProfileForm" role="form" style="width : 50%; margin-left : 25%" novalidate>
    <div class="form-group">
      <label>Name</label>
      <input type="text" class="form-control" ng-model="nameProfile">
    </div>
    <div class="form-group" ng-class="{'has-error' : ProfileForm.email.$invalid && !ProfileForm.email.$pristine}">
      <label>E-mail Address</label>
      <input type="text" name="email" class="form-control" ng-model="emailProfile" required>
      <p ng-show="ProfileForm.email.$invalid && !ProfileForm.email.$pristine" class="help-block">E-mail address is required.</p>
    </div>
    <div class="form-group" ng-class="{'has-error' : ProfileForm.password.$invalid && !ProfileForm.password.$pristine}">
      <label>New Password</label>
      <input type="password" name="password" class="form-control" ng-model="passProfile" required>
      <p ng-show="ProfileForm.password.$invalid && !ProfileForm.password.$pristine" class="help-block">Password is required.</p>
    </div>
    <div class="form-group" ng-hide="isRestaurantProfile">
      <label>Birth Date</label>
      <input type="date" class="form-control" ng-model="birthDateProfile" string-to-timestamp>
    </div>
    <div class="form-group">
      <label>Location</label>
      <input type="text" class="form-control" ng-model="locationProfile">
    </div>
    <button type="submit" class="btn btn-default" ng-click="updateProfile()" ng-disabled="ProfileForm.$invalid">Update My Profile</button>
  </form>
  <div class="col-md-9">
	<uib-tabset>
    	<uib-tab heading="My Recipes">
        <div class="table-responsive">

          <table class="table table-striped table-bordered">
            <tr class="info" ng-repeat="_ in userRecipes | orderBy:'name'">
              <td ng-show="($parent.$index % 3 == 0) && ($parent.$index + 3 > $index) && ($parent.$index <= $index)" ng-repeat="recipe in userRecipes | orderBy:'name'">
                        <a href="#" ui-sref="viewRecipe({ recipeID : '' + recipe.id})"> {{recipe.name}} </a>
                        
                    </td>
            <tr>
          </table>
          
        </div>
      </uib-tab>
      <uib-tab heading="Preferences">
        <div class="form-group form-inline col-xs-12 col-sm-12 col-md-9 col-lg-9 ">
          <h3>Allergens</h3>
            <p ng-repeat="allergen in allergens">
            {{ allergen.item_name }} 
          </p>
        </div>
        <div class="form-group form-inline col-xs-12 col-sm-12 col-md-9 col-lg-9 ">
          <input type="text" class="form-control col-md-2 col-lg-3 col-xs-12" ng-model="newAllergen" placeholder="New Allergen" uib-typeahead="ingredient as ingredient.fields.item_name for ingredient in getCompletions($viewValue)" typeahead-select-on-blur="true" typeahead-on-select="onAllergenSelect($item,$model,$label)">
          <button class="form-control btn btn-default col-md-2 col-lg-3 col-xs-12" ng-show="!!newAllergen" ng-click="addAllergen()" aria-label="Add Ingredient">
            <span class="glyphicon glyphicon-plus" aria-hidden="true" style="color:green;"></span></button>
        </div>
      </uib-tab>
      <uib-tab heading="Consumption">
        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 ">
          <h3>Daily Average Consumption</h3>
             <div ng-repeat="(id,nutritionLiteral) in nutritionLiterals">
               <b>{{ nutritionLiteral.charAt(0).toUpperCase() + nutritionLiteral.slice(1) }}</b> : {{ avgNutrition[nutritionLiteral] }} {{ nutritionUnits[id] }}
             </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 ">
          <h3>Previously Consumed Recipes</h3>
          <table class="table table-striped table-bordered">
            <tr class="info" ng-repeat="_ in consumedRecipes | orderBy:'name'">
              <td ng-show="($parent.$index % 3 == 0) && ($parent.$index + 3 > $index) && ($parent.$index <= $index)" ng-repeat="recipe in consumedRecipes | orderBy:'name'">
                        <a href="#" ui-sref="viewRecipe({ recipeID : '' + recipe.id})"> {{recipe.name}} </a>
                        
                    </td>
            </tr>
          </table>
        </div>
      </uib-tab>
  	</uib-tabset>
  </div>


</div>